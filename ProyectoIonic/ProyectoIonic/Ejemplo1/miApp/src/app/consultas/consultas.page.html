<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      <ion-icon name="medical-outline" class="header-icon"></ion-icon>
      ðŸ“š Historia ClÃ­nica
    </ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear">
        <ion-icon name="search-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear">
        <ion-icon name="filter-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="medical-content">
  <!-- EstadÃ­sticas de Historia ClÃ­nica -->
  <div class="stats-header">
    <div class="stat-card">
      <ion-icon name="library-outline" color="primary"></ion-icon>
      <div class="stat-info">
        <span class="stat-number">1,247</span>
        <span class="stat-label">Registros MÃ©dicos</span>
      </div>
    </div>
    <div class="stat-card">
      <ion-icon name="calendar-outline" color="success"></ion-icon>
      <div class="stat-info">
        <span class="stat-number">28</span>
        <span class="stat-label">Consultas Hoy</span>
      </div>
    </div>
    <div class="stat-card">
      <ion-icon name="time-outline" color="warning"></ion-icon>
      <div class="stat-info">
        <span class="stat-number">12</span>
        <span class="stat-label">Seguimientos</span>
      </div>
    </div>
  </div>

  <!-- Segmentado para filtrar historia -->
  <ion-segment value="recientes" class="medical-segment">
    <ion-segment-button value="recientes">
      <ion-icon name="time-outline"></ion-icon>
      <ion-label>Recientes</ion-label>
    </ion-segment-button>
    <ion-segment-button value="urgentes">
      <ion-icon name="warning-outline"></ion-icon>
      <ion-label>Urgentes</ion-label>
    </ion-segment-button>
    <ion-segment-button value="seguimiento">
      <ion-icon name="refresh-outline"></ion-icon>
      <ion-label>Seguimiento</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Historia ClÃ­nica Reciente -->
  <div class="section-header">
    <h2>
      <ion-icon name="library" color="primary"></ion-icon>
      Historial MÃ©dico Reciente
    </h2>
    <p class="section-subtitle">Seguimiento de fichas mÃ©dicas y consultas</p>
  </div>

  <ion-list class="medical-list">
    <!-- Registro CrÃ­tico -->
    <ion-item class="consultation-item critical">
      <ion-avatar slot="start" class="consultation-avatar">
        <ion-icon name="medical" class="avatar-icon"></ion-icon>
      </ion-avatar>
      <ion-label>
        <h3>ðŸ“‹ Control Diabetes - MarÃ­a GonzÃ¡lez</h3>
        <p class="consultation-details">
          <ion-icon name="calendar-outline" color="medium"></ion-icon>
          Hoy 14:30 â€¢ Dr. Roberto Soto â€¢ EndocrinologÃ­a
        </p>
        <p class="consultation-note">
          <ion-icon name="document-text-outline" color="medium"></ion-icon>
          Ficha #FM-001 â€¢ Ajuste medicaciÃ³n â€¢ Hemoglobina glucosilada: 8.2%
        </p>
        <div class="medical-indicators">
          <ion-chip color="danger" class="priority-chip">
            <ion-icon name="warning"></ion-icon>
            <ion-label>Control Urgente</ion-label>
          </ion-chip>
          <ion-chip color="tertiary" class="status-chip">
            <ion-label>Seguimiento 1 sem</ion-label>
          </ion-chip>
        </div>
      </ion-label>
      <div class="action-buttons" slot="end">
        <ion-button fill="clear" color="primary" (click)="verFichaMedica('FM-001')">
          <ion-icon name="document-text-outline"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="success" (click)="verHistorialCompleto('FM-001')">
          <ion-icon name="library-outline"></ion-icon>
        </ion-button>
      </div>
    </ion-item>

    <!-- Registro Normal -->
    <ion-item class="consultation-item">
      <ion-avatar slot="start" class="consultation-avatar">
        <ion-icon name="heart" class="avatar-icon"></ion-icon>
      </ion-avatar>
      <ion-label>
        <h3>ðŸ’Š PrescripciÃ³n Renovada - Ana LÃ³pez</h3>
        <p class="consultation-details">
          <ion-icon name="calendar-outline" color="medium"></ion-icon>
          Ayer 16:45 â€¢ Dra. Carmen PÃ©rez â€¢ CardiologÃ­a
        </p>
        <p class="consultation-note">
          <ion-icon name="document-text-outline" color="medium"></ion-icon>
          Ficha #FM-023 â€¢ HipertensiÃ³n controlada â€¢ PresiÃ³n: 130/85 mmHg
        </p>
        <div class="medical-indicators">
          <ion-chip color="success" class="status-chip">
            <ion-label>Estable</ion-label>
          </ion-chip>
          <ion-chip color="secondary" class="follow-chip">
            <ion-label>Control 3 meses</ion-label>
          </ion-chip>
        </div>
      </ion-label>
      <div class="action-buttons" slot="end">
        <ion-button fill="clear" color="primary" (click)="verFichaMedica('FM-023')">
          <ion-icon name="document-text-outline"></ion-icon>
        </ion-button>
        <ion-button fill="clear" color="tertiary" (click)="renovarPrescripcion('FM-023')">
          <ion-icon name="repeat-outline"></ion-icon>
        </ion-button>
      </div>
    </ion-item>
  </ion-list>
  
  <!-- Acciones RÃ¡pidas Centradas en Fichas -->
  <div class="quick-actions-grid">
    <div class="action-section">
      <h3>ðŸ“‹ GestiÃ³n de Fichas</h3>
      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <ion-button (click)="crearNuevaFicha()" expand="block" fill="outline" color="primary">
              <ion-icon name="document-attach-outline" slot="start"></ion-icon>
              Nueva Ficha
            </ion-button>
          </ion-col>
          <ion-col size="6">
            <ion-button (click)="buscarFichas()" expand="block" color="tertiary">
              <ion-icon name="search-outline" slot="start"></ion-icon>
              Buscar Fichas
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <div class="action-section">
      <h3>ðŸ©º AnÃ¡lisis MÃ©dico</h3>
      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <ion-button (click)="verMedicamentos()" expand="block" fill="outline" color="success">
              <ion-icon name="medical-outline" slot="start"></ion-icon>
              Medicamentos
            </ion-button>
          </ion-col>
          <ion-col size="6">
            <ion-button (click)="verDiagnosticos()" expand="block" color="warning">
              <ion-icon name="clipboard-outline" slot="start"></ion-icon>
              DiagnÃ³sticos
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
</ion-content>
